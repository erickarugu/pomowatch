import{helpers}from"./helpers.js";export const Timer={};Timer.timers=[],Timer.settings={timers:{pomodoro:25,short_break:5,long_break:10},auto_start_pomodoros:!1,auto_start_breaks:!1,long_break_interval:6,sound:!1},Timer.controls={paused:!1,running:!1,loop:!1,loop_count:0,on_break:!1},Timer.saveSettings=function(e){let t=e.get("pomodoro"),r=e.get("short_break"),o=e.get("long_break"),s=e.get("auto_start_breaks"),i=e.get("auto_start_pomodoros"),n=e.get("long_break_intervals"),m=e.get("sound");if(Timer.settings.timers={pomodoro:t,short_break:r,long_break:o},Timer.settings.auto_start_pomodoros=i,Timer.settings.auto_start_breaks=s,Timer.settings.long_break_interval=parseInt(n,10),Timer.settings.sound=m,localStorage.setItem("pomowatch_settings",JSON.stringify(Timer.settings)),!Timer.controls.running){const e=document.getElementById("timer");let t=60*Timer.settings.timers.pomodoro,r=Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60),o=t%60<10?"0"+t%60:t%60;e.innerHTML=`${r}:${o}`}},Timer.clearTimers=function(){if(Timer.timers.length>0)for(var e=0;e<Timer.timers.length;e++)clearInterval(Timer.timers[e])},Timer.startTimer=function(e){let t="pomodoro"==e?Timer.settings.timers.pomodoro:"short"==e?Timer.settings.timers.short_break:Timer.settings.timers.long_break;t*=60,"pomodoro"==e&&"true"==Timer.settings.auto_start_breaks?Timer.controls.on_break=!0:Timer.controls.on_break=!1;const r=document.getElementById("timer"),o=document.getElementById("start-stop-button");let s=new Audio("../../assets/audios/door-bell.mp3"),i=new Audio("../../assets/audios/clock-tick.mp3");if(Timer.timers.length>0)for(var n=0;n<Timer.timers.length;n++)clearInterval(Timer.timers[n]);const m=setInterval((()=>{let e=Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60),n=t%60<10?"0"+t%60:t%60;r.innerHTML=`${e}:${n}`,document.title=`${e}:${n}`,"true"!=Timer.settings.sound||Timer.controls.paused||(i.currentTime=0,i.play()),t<=0&&(clearInterval(m),o.innerText="START",Timer.controls.running=!1,s.play(),Timer.controls.loop&&Timer.timerLoop(!1)),Timer.controls.paused||t--}),1e3);Timer.timers.push(m),o.innerText="STOP",Timer.controls.running=!0},Timer.timerLoop=function(e){"true"==Timer.settings.auto_start_pomodoros&&(Timer.controls.loop=!0),Timer.controls.on_break?0!==Timer.controls.loop_count&&Timer.controls.loop_count%Timer.settings.long_break_interval==0?(Timer.startTimer("long"),helpers.updateDisplay("long")):(helpers.updateDisplay("short"),Timer.startTimer("short")):(e||Timer.controls.loop_count++,Timer.startTimer("pomodoro"),helpers.updateDisplay("pomodoro"))};
//# sourceMappingURL=timer.js.map